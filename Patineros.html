<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Patineros ‚Äî Formato</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="Patineros.css" />

  <!-- Forzar Home (#registro) si se entra sin hash -->
  <script>
    if (!location.hash) {
      location.replace(location.pathname + '#registro');
    }
  </script>
</head>
<body>
  <!-- Barra superior -->
  <header class="topbar">
    <div class="brand">üß± Patineros</div>
    <nav class="navbar">
      <a href="#registro">Registro</a>
      <a href="#retirar">Retirar</a>
      <a href="#salidas">Salidas</a>
      <a href="#posiciones">Posiciones</a>
      <a href="#racks">Racks</a>
      <a href="#comentarios">Comentarios</a>
    </nav>
    <a href="../Login/index.html" class="logout">Salir</a>
  </header>

  <main class="container">

    <!-- ===== 1) REGISTRO (HOME) ===== -->
    <section id="registro" class="panel">
      <header class="panel-header">
        <h2>Registro de Racks</h2>
      </header>

      <form id="formRegistro" class="form" autocomplete="off">
        <div class="row">
          <div class="field">
            <label>Seleccionar l√≠nea</label>
            <div class="line-buttons">
              <input type="radio" id="l1" name="linea" value="1" />
              <label for="l1">L√≠nea 1</label>
              <input type="radio" id="l2" name="linea" value="2" />
              <label for="l2">L√≠nea 2</label>
              <input type="radio" id="l3" name="linea" value="3" />
              <label for="l3">L√≠nea 3</label>
              <input type="radio" id="l4" name="linea" value="4" />
              <label for="l4">L√≠nea 4</label>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="operador">Nombre del operador</label>
            <input id="operador" type="text" placeholder="Escribe el nombre completo" required />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="codigoSeco">C√≥digo de seco</label>
            <div class="with-actions">
              <input id="codigoSeco" type="text" placeholder="Escribe o escanea el c√≥digo" />
              <button type="button" class="ghost" aria-label="Escanear c√≥digo QR">Escanear QR</button>
            </div>
            <!-- Vista solo lectura -->
            <div class="readonly-block" aria-live="polite">
              <label>Firmando el acumulador</label>
              <input id="firmandoAcum" type="text" value="‚Äî Se autocompleta al validar ‚Äî" readonly />
              <small>Campo no editable; se completa al validar el c√≥digo de seco.</small>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="cantidad">Cantidad</label>
            <input id="cantidad" type="number" min="0" placeholder="0" />
          </div>
        </div>

        <!-- Numero de rack DEBAJO de cantidad -->
        <div class="row">
          <div class="field">
            <label for="numRack">N√∫mero de rack <small>(Formato: Rack###)</small></label>
            <div class="with-actions">
              <input id="numRack" type="text" placeholder="Ej. Rack001" />
              <button type="button" class="ghost" aria-label="Escanear QR de rack">Escanear QR</button>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="posRack">Posici√≥n de rack <small>(Formato: P###)</small></label>
            <div class="with-actions">
              <input id="posRack" type="text" placeholder="Ej. P002" />
              <button type="button" class="ghost" aria-label="Escanear QR de posici√≥n">Escanear QR</button>
            </div>
          </div>
        </div>

        <div class="actions">
          <button type="submit" class="primary">Guardar registro</button>
          <button type="reset" class="secondary">Limpiar</button>
        </div>
      </form>
    </section>

    <!-- ===== 2) RETIRAR RACKS ===== -->
    <section id="retirar" class="panel">
      <header class="panel-header">
        <h2>Retirar Racks</h2>
      </header>

      <div class="tabs">
        <input type="radio" id="sal1" name="salidas" checked />
        <label for="sal1">L√≠nea salida 1</label>

        <input type="radio" id="sal2" name="salidas" />
        <label for="sal2">L√≠nea salida 2</label>

        <input type="radio" id="sal3" name="salidas" />
        <label for="sal3">L√≠nea salida 3</label>

        <div class="tab-content">
          <!-- L1 -->
          <div class="tab-pane">
            <table class="table" id="tablaRetirar1">
              <thead>
                <tr><th>Posici√≥n</th><th>N√∫m. Rack</th><th>Acci√≥n</th></tr>
              </thead>
              <tbody><!-- items din√°micos --></tbody>
            </table>
          </div>
          <!-- L2 -->
          <div class="tab-pane">
            <table class="table" id="tablaRetirar2">
              <thead>
                <tr><th>Posici√≥n</th><th>N√∫m. Rack</th><th>Acci√≥n</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <!-- L3 -->
          <div class="tab-pane">
            <table class="table" id="tablaRetirar3">
              <thead>
                <tr><th>Posici√≥n</th><th>N√∫m. Rack</th><th>Acci√≥n</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>

      <p class="hint">Al presionar <em>Retirar</em>, el √≠tem pasar√° a <a href="#salidas">Salidas</a>.</p>
    </section>

    <!-- ===== 3) SALIDAS ===== -->
    <section id="salidas" class="panel">
      <header class="panel-header">
        <h2>Salidas</h2>
      </header>

      <div class="tabs">
        <input type="radio" id="salout1" name="salidasout" checked />
        <label for="salout1">L√≠nea salida 1</label>

        <input type="radio" id="salout2" name="salidasout" />
        <label for="salout2">L√≠nea salida 2</label>

        <input type="radio" id="salout3" name="salidasout" />
        <label for="salout3">L√≠nea salida 3</label>

        <div class="tab-content">
          <div class="tab-pane">
            <table class="table" id="tablaSalidas1">
              <thead>
                <tr><th>Posici√≥n</th><th>N√∫m. Rack</th><th>Entrada</th><th>Salida</th></tr>
              </thead>
              <tbody><!-- din√°mico --></tbody>
            </table>
          </div>
          <div class="tab-pane">
            <table class="table" id="tablaSalidas2">
              <thead>
                <tr><th>Posici√≥n</th><th>N√∫m. Rack</th><th>Entrada</th><th>Salida</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="tab-pane">
            <table class="table" id="tablaSalidas3">
              <thead>
                <tr><th>Posici√≥n</th><th>N√∫m. Rack</th><th>Entrada</th><th>Salida</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
      <p class="hint">Haz clic en cualquier fila para ver la informaci√≥n completa del registro.</p>
    </section>

    <!-- ===== 4) POSICIONES DISPONIBLES ===== -->
    <section id="posiciones" class="panel">
      <header class="panel-header">
        <h2>Posiciones Disponibles</h2>
      </header>

      <div class="scroll">
        <table class="table" id="tablaPosiciones">
          <thead>
            <tr><th>Posici√≥n</th><th>Estado</th><th>Observaciones</th></tr>
          </thead>
          <tbody><!-- din√°mico --></tbody>
        </table>
      </div>
    </section>

    <!-- ===== 5) RACKS DISPONIBLES ===== -->
    <section id="racks" class="panel">
      <header class="panel-header">
        <h2>Racks Disponibles</h2>
      </header>

      <div class="scroll">
        <table class="table" id="tablaRacks">
          <thead>
            <tr><th>N√∫mero Rack</th><th>Estado</th></tr>
          </thead>
          <tbody><!-- din√°mico --></tbody>
        </table>
      </div>
    </section>

    <!-- ===== 6) COMENTARIOS ===== -->
    <section id="comentarios" class="panel">
      <header class="panel-header">
        <h2>Comentarios</h2>
      </header>

      <form id="formComentario" class="form">
        <div class="row">
          <div class="field">
            <label for="comentario">Escribe tu comentario</label>
            <textarea id="comentario" rows="5" placeholder="Describe el hallazgo, mejora o situaci√≥n‚Ä¶"></textarea>
          </div>
        </div>
        <div class="actions">
          <button type="submit" class="primary">Enviar comentario</button>
          <button type="reset" class="secondary">Limpiar</button>
        </div>
      </form>
    </section>
  </main>

  <footer class="foot">
    <small>¬© 2025 ‚Ä¢ √Årea Patineros</small>
  </footer>

  <!-- Modales -->
  <dialog id="modalEntrada" class="modal">
    <form method="dialog" class="modal-content" id="formEntrada">
      <h3>Dar entrada al rack</h3>

      <div class="row">
        <div class="field">
          <label>Resumen</label>
          <div id="entradaResumen" class="resume"></div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label for="patineroEntrada">Patinero que da entrada</label>
          <input id="patineroEntrada" type="text" required />
        </div>
      </div>

      <!-- Confirmaci√≥n de l√≠nea con botones 1‚Äì4 -->
      <div class="row">
        <div class="field">
          <label>Selecciona la l√≠nea correcta</label>
          <div id="confirmLineaBtns" class="line-buttons">
            <button type="button" class="ghost" data-linea="1">L√≠nea 1</button>
            <button type="button" class="ghost" data-linea="2">L√≠nea 2</button>
            <button type="button" class="ghost" data-linea="3">L√≠nea 3</button>
            <button type="button" class="ghost" data-linea="4">L√≠nea 4</button>
          </div>
          <input type="hidden" id="confirmLineaValue" />
          <small>Debes seleccionar la l√≠nea que corresponde al registro.</small>
        </div>
      </div>

      <!-- CONFIRMACI√ìN DE RACK + QR -->
      <div class="row">
        <div class="field">
          <label for="confirmRack">Confirmaci√≥n de Rack <small>(debe coincidir; ej. Rack001)</small></label>
          <div class="with-actions">
            <input id="confirmRack" type="text" placeholder="Ej. Rack001" required />
            <button type="button" id="btnScanRack" class="ghost" aria-label="Escanear QR de rack">Escanear QR</button>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="primary" value="save">Guardar</button>
        <button class="secondary" value="cancel">Cancelar</button>
      </div>
    </form>
  </dialog>

  <dialog id="modalSalida" class="modal">
    <form method="dialog" class="modal-content" id="formSalida">
      <h3>Dar salida al rack</h3>
      <div class="row">
        <div class="field">
          <label>Resumen</label>
          <div id="salidaResumen" class="resume"></div>
        </div>
      </div>
      <div class="row">
        <div class="field">
          <label for="validacionPatinero">Validaci√≥n por patinero</label>
          <input id="validacionPatinero" type="text" required />
        </div>
      </div>
      <div class="actions">
        <button class="primary" value="save">Guardar</button>
        <button class="secondary" value="cancel">Cancelar</button>
      </div>
    </form>
  </dialog>

  <!-- Modal de informaci√≥n completa -->
  <dialog id="modalInfo" class="modal">
    <div class="modal-content">
      <h3>Detalle del registro</h3>
      <div id="infoDetalle" class="resume"></div>
      <div class="actions" style="margin-top:1rem">
        <button class="secondary" onclick="document.getElementById('modalInfo').close()">Cerrar</button>
      </div>
    </div>
  </dialog>

  <script src="Patineros.js"></script>
</body>
</html>
s