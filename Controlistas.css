/* ===================== RESET / BASE ===================== */
* { box-sizing: border-box; }
html, body { height: 100%; }
:root{
  --bg: #0f141a;
  --panel: #151b22;
  --panel-2: #1a2230;
  --text: #e8eef6;
  --muted: #aab7c7;
  --accent: #4ea1ff;
  --primary: #2dd4bf;
  --warn: #fbbf24;
  --danger: #ef4444;
  --ok: #22c55e;
  --busy: #f59e0b;
  --b1: #1e2a3a;
  --b2: #243143;
  --line: #2b3b52;
  --chip: #223047;
  --ghost: #2a3a52;
  --shadow: 0 6px 24px rgba(0,0,0,.32);
}

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg, #0e1319, #0c0f15);
  color: var(--text);
}

/* Ocultar secciones no activas (no landing page) */
section[hidden]{ display:none !important; }

/* ===================== TOP BAR ===================== */
.topbar{
  position: sticky; top: 0; z-index: 40;
  background: rgba(17,24,39,.75);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--line);
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  padding: .5rem .75rem;
}

.hamburger{
  width: 42px; height: 42px;
  display: inline-grid; place-items: center;
  background: transparent; border: 1px solid var(--line);
  border-radius: 10px; cursor: pointer;
}
.hamburger span{
  display:block; width:20px; height:2px; background: var(--text); margin:3px 0;
}

.topnav{
  display: flex; gap: .6rem; align-items: center; justify-content: center; /* centrada */
}
.topnav a{
  text-decoration: none; color: var(--muted); padding: .45rem .7rem;
  border-radius: 10px; border: 1px solid transparent; transition: .15s;
  white-space: nowrap;
}
.topnav a:hover{ color: var(--text); background: rgba(78,161,255,.08); border-color: var(--line); }
.topnav a.active{ color: var(--text); background: rgba(45,212,191,.12); border-color: rgba(45,212,191,.35); }

.logout{
  text-decoration: none; color: var(--text);
  padding: .45rem .75rem; border: 1px solid var(--line); border-radius: 10px;
  background: linear-gradient(180deg, #1b2636, #162131);
}

/* ===================== LAYOUT ===================== */
.container{
  max-width: 1400px; margin: 0 auto; padding: 1rem;
}
.panel{
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 1rem;
  margin: 1rem 0;
  box-shadow: var(--shadow);
}
.panel-header{
  display:flex; align-items:center; justify-content: space-between;
  padding-bottom: .5rem; border-bottom: 1px dashed var(--line);
  margin-bottom: .75rem;
}
.row-between{ display:flex; justify-content:space-between; align-items:center; gap:.75rem; }

/* ===================== SIDEBAR ===================== */
.sidebar{
  position: fixed; inset: 0 auto 0 0; width: 280px; z-index: 50;
  background: rgba(16,22,32,.98);
  border-right: 1px solid var(--line);
  transform: translateX(-100%); transition: transform .2s ease-in-out;
  padding: .75rem;
}
.sidebar .sidenav a{
  display:block; padding: .65rem .75rem; margin: .25rem 0;
  text-decoration: none; color: var(--muted); border-radius: 10px;
  border: 1px solid transparent;
}
.sidebar .sidenav a:hover{ color: var(--text); background: rgba(78,161,255,.08); border-color: var(--line); }
.sidebar .sidenav a.active{ color: var(--text); background: rgba(45,212,191,.12); border-color: rgba(45,212,191,.35); }

.backdrop{
  position: fixed; inset: 0; z-index: 45; backdrop-filter: blur(2px);
  background: rgba(0,0,0,.35);
}
body:not(.menu-open) .backdrop{ display:none; }
body.menu-open .sidebar{ transform: translateX(0); }

/* ===================== TABLES ===================== */
.table{
  width: 100%; border-collapse: collapse; font-size: .95rem; border-radius: 12px; overflow: hidden;
}
.table thead th{
  text-align: left; padding: .6rem .6rem; background: var(--b1); color: var(--text);
  border-bottom: 1px solid var(--line);
}
.table tbody td{
  padding: .6rem .6rem; border-bottom: 1px solid var(--line); color: var(--text);
}
.table tbody tr:hover{ background: rgba(78,161,255,.06); }
.table .tr-separator td{
  background: var(--b2); font-weight: 600; color: var(--text);
}

/* ===================== BUTTONS ===================== */
button, .btn{
  appearance:none; border:none; cursor: pointer; font-weight:600;
  padding:.55rem .8rem; border-radius:10px; transition:.15s; color: var(--text);
}
button:disabled{ opacity:.6; cursor:not-allowed; }

.primary{ background: linear-gradient(180deg, #1a3f4a, #145e57); border:1px solid rgba(45,212,191,.35); }
.primary:hover{ transform: translateY(-1px); box-shadow: 0 6px 16px rgba(45,212,191,.25); }

.secondary{ background: #1b2636; border: 1px solid var(--line); color: var(--muted); }
.secondary:hover{ background:#1f2a3a; color: var(--text); }

.ghost{ background: rgba(46,61,85,.35); border:1px solid var(--line); color: var(--muted); }
.ghost:hover{ background: rgba(78,161,255,.12); color: var(--text); }

.accent{ background: linear-gradient(180deg, #203252, #1a2842); border:1px solid rgba(78,161,255,.45); }
.accent:hover{ box-shadow: 0 6px 16px rgba(78,161,255,.22); }

.badge{
  display:inline-block; padding:.25rem .5rem; border-radius:999px;
  font-size:.85rem; background: #1d2a3a; border:1px solid var(--line);
}

/* ===================== SEARCH / INPUTS ===================== */
.search, input[type="text"], input[type="number"], input[type="datetime-local"], textarea, select{
  width: 100%; padding: .55rem .6rem; border-radius: 10px;
  border:1px solid var(--line); background: #101826; color: var(--text);
  outline: none;
}
.search:focus, input:focus, textarea:focus, select:focus{ border-color: rgba(78,161,255,.45); }

/* ===================== TABS (Pendientes) ===================== */
.tabs{ margin-top:.5rem; }
.tabs input[type="radio"]{ display:none; }
.tabs label{
  display:inline-block; margin-right:.4rem; padding:.45rem .7rem; border-radius: 10px;
  border:1px solid var(--line); color: var(--muted); cursor:pointer;
}
.tabs input[type="radio"]:checked + label{
  color:var(--text); background: rgba(45,212,191,.12); border-color: rgba(45,212,191,.35);
}
.tab-content{ margin-top:.6rem; background: var(--panel-2); border:1px solid var(--line); border-radius:12px; padding:.6rem; }
.tab-pane{ animation: fade .18s ease-in; }
@keyframes fade{ from{opacity:.4; transform: translateY(4px);} to{opacity:1; transform: none;} }

/* ===================== STATUS (subsecciones horizontales) ===================== */
.status-tabs{
  display:flex; gap:.5rem; flex-wrap: wrap;
  border-bottom: 1px dashed var(--line); padding-bottom:.6rem; margin-bottom:.8rem;
}
.status-tabs .ghost.active{
  background: rgba(45,212,191,.12); color: var(--text); border-color: rgba(45,212,191,.35);
}
.status-views .sview[hidden]{ display:none !important; }

/* ===================== CARDS / KPI (Home) ===================== */
.kpi-grid{
  display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:.75rem;
}
.kpi-card{
  background: var(--panel-2); border:1px solid var(--line); border-radius:14px; padding:.8rem;
}
.kpi-title{ color: var(--muted); font-size:.9rem; }
.kpi-value{ font-size:1.8rem; font-weight:700; margin-top:.35rem; }

/* ===================== GRIDS (Catálogo) ===================== */
.grid-catalogo{
  list-style:none; margin:0; padding:0;
  display:grid; grid-template-columns: repeat(6, minmax(0,1fr)); gap:.6rem;
}
.grid-catalogo li{
  background: var(--panel-2); border:1px solid var(--line); border-radius:12px;
  padding:.7rem; cursor:pointer; transition:.12s;
}
.grid-catalogo li:hover{ transform: translateY(-2px); box-shadow: var(--shadow); }
.tile-title{ font-weight:700; margin-bottom:.35rem; }
.tile-state{ font-size:.85rem; padding:.2rem .5rem; border-radius:999px; display:inline-block; border:1px solid var(--line); }
.state-ok{ background: rgba(34,197,94,.12); border-color: rgba(34,197,94,.35); }
.state-busy{ background: rgba(245,158,11,.12); border-color: rgba(245,158,11,.35); }
.state-warn{ background: rgba(251,191,36,.12); border-color: rgba(251,191,36,.35); }

/* ===================== COMMENTS ===================== */
.comments{ list-style:none; margin:0; padding:0; display:grid; gap:.5rem; }
.comments li{
  background: var(--panel-2); border:1px solid var(--line); border-radius:12px; padding:.7rem;
}
.comments .row{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; margin-bottom:.35rem; }
.comments .actions{ display:flex; gap:.5rem; }
.comments.muted li{ opacity:.8; }

/* Badge de comentarios no leídos en topnav (opcional) */
#linkComentarios.has-unread{
  position: relative;
}
#linkComentarios.has-unread::after{
  content: attr(data-unread);
  position:absolute; top:-6px; right:-6px;
  background: var(--danger); color:#fff; font-weight:800;
  font-size: .72rem; line-height: 1; padding: .25rem .35rem; border-radius:999px;
  border: 2px solid #0d1218;
}
.pulse-highlight{ animation: pulseShadow 1.4s ease-in-out 1; }
@keyframes pulseShadow{
  0%{ box-shadow: 0 0 0 0 rgba(78,161,255,.0); }
  50%{ box-shadow: 0 0 0 12px rgba(78,161,255,.18); }
  100%{ box-shadow: 0 0 0 0 rgba(78,161,255,0); }
}

/* ===================== FORMS / FIELDS ===================== */
.field{ display:block; margin:.4rem 0; }
.field > span{ display:block; margin-bottom:.25rem; color: var(--muted); font-size:.9rem; }
.with-actions{ display:flex; gap:.4rem; align-items:center; }
.grid2{ display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:.6rem; }

/* ===================== MODALS ===================== */
.modal{
  border:none; border-radius: 16px; padding:0; background: transparent;
}
.modal::backdrop{ background: rgba(0,0,0,.45); backdrop-filter: blur(2px); }
.modal-content{
  background: var(--panel); border: 1px solid var(--line); border-radius: 16px;
  min-width: 320px; max-width: 720px; margin: 0; padding: 1rem; box-shadow: var(--shadow);
}
.modal h3{ margin: .2rem 0 .6rem; }
.details dt{ color: var(--muted); font-size:.85rem; }
.details dd{ margin: 0 0 .35rem; }
.resume{ opacity:.9; }

/* ===================== PROGRESS (Confirmación de fin) ===================== */
.restante-wrap{ min-width: 220px; }
.progress{
  position: relative; height: 24px; background: #2a2f1f; border:1px solid #4b4b2d; border-radius: 8px;
  overflow: hidden;
}
.progress .bar{
  position: absolute; left:0; top:0; bottom:0; width:0%;
  background: repeating-linear-gradient(
    90deg,
    rgba(255,200,0,.28) 0px,
    rgba(255,200,0,.28) 14px,
    rgba(255,200,0,.18) 14px,
    rgba(255,200,0,.18) 28px
  );
  transition: width .6s linear;
}
.progress .label{
  position: absolute; inset:0; display:grid; place-items:center; font-weight:700; color:#fef6d6;
  text-shadow: 0 1px 2px rgba(0,0,0,.45);
}
.progress.completed{
  border-color: rgba(34,197,94,.45);
  background: rgba(34,197,94,.15);
}
.progress.completed .bar{
  background: linear-gradient(90deg, rgba(34,197,94,.35), rgba(34,197,94,.55));
  width: 100% !important;
}
.progress.completed .label{
  color: #eafff0;
}

/* ===================== CHIPS (Modal Racks) ===================== */
.chip-row{ display:flex; gap:.4rem; flex-wrap: wrap; }
.chip{
  background: var(--chip); border:1px solid var(--line); color: var(--text);
  padding:.4rem .6rem; border-radius: 999px; cursor:pointer; user-select:none;
}
.chip:hover{ background: #2a3b57; }
.chip.active{ background: rgba(78,161,255,.18); border-color: rgba(78,161,255,.45); }
.chip.warn{ background: rgba(251,191,36,.12); border-color: rgba(251,191,36,.35); }
.chip.warn.active{ background: rgba(251,191,36,.24); }
.chip.danger{ background: rgba(239,68,68,.12); border-color: rgba(239,68,68,.45); }
.chip.danger.active{ background: rgba(239,68,68,.28); }

/* ===================== HINTS ===================== */
.hint{ color: var(--muted); font-size:.9rem; margin-top:.4rem; }

/* ===================== RESPONSIVE ===================== */
@media (max-width: 1200px){
  .grid-catalogo{ grid-template-columns: repeat(5,minmax(0,1fr)); }
}
@media (max-width: 992px){
  .kpi-grid{ grid-template-columns: repeat(2,minmax(0,1fr)); }
  .grid-catalogo{ grid-template-columns: repeat(4,minmax(0,1fr)); }
}
@media (max-width: 820px){
  .topbar{ grid-template-columns: auto 1fr auto; }
  .topnav{ gap:.35rem; }
  .topnav a{ padding:.4rem .55rem; }
  .grid2{ grid-template-columns: 1fr; }
}
@media (max-width: 680px){
  .kpi-grid{ grid-template-columns: 1fr; }
  .grid-catalogo{ grid-template-columns: repeat(2,minmax(0,1fr)); }
  .topnav{ display:none; } /* En móviles, usar sidebar */
}

/* =========================================================
   RESPONSVIE LAYOUT – agrega esto al FINAL de Controlistas.css
   Breakpoints:
   - ≤576px  : móviles
   - 577–768 : tablet
   - 769–1200: desktop
   - ≥1201   : monitores grandes (2K/4K)
   ========================================================= */

/* ---- Defaults que ayudan al responsive en general ---- */
.container { max-width: 1280px; margin: 0 auto; padding: 16px 20px; }
.topbar { gap: .5rem; }
.topnav { display: flex; flex-wrap: wrap; gap: .25rem .35rem; justify-content: center; }
.topnav a { padding: 6px 10px; border-radius: 8px; white-space: nowrap; }
.panel { margin: 18px 0; padding: 16px; }
.kpi-grid { display: grid; gap: 12px; grid-template-columns: repeat(4, minmax(0, 1fr)); }
.grid-catalogo { display: grid; gap: 10px; grid-template-columns: repeat(6, minmax(0, 1fr)); }
.row-between { display:flex; align-items:center; justify-content:space-between; gap:.75rem; }

/* Evita desbordes horizontales en tablas pequeñas */
.table { width: 100%; border-collapse: collapse; }
@media (max-width: 768px) {
  .table { display: block; overflow-x: auto; white-space: nowrap; }
}

/* Modales */
.modal .modal-content { width: min(92vw, 720px); }

/* Status sub-tabs en una fila y con wrap limpio */
.status-tabs { display: flex; gap: .5rem; flex-wrap: wrap; }
.status-tabs .ghost { padding: .5rem .75rem; }

/* ========= MÓVILES (≤576px) ========= */
@media (max-width: 576px) {
  html { font-size: 15px; }
  .container { padding: 12px; }
  .panel { padding: 12px; margin: 14px 0; }

  /* Topbar centrada, sin scroll horizontal */
  .topbar { padding: 8px 10px; }
  .topnav { gap: .25rem; }
  .topnav a { font-size: .92rem; padding: 6px 8px; }

  /* KPIs en 2 columnas */
  .kpi-grid { grid-template-columns: repeat(2, minmax(0,1fr)); gap: 10px; }

  /* Catálogos en 2 columnas */
  .grid-catalogo { grid-template-columns: repeat(2, minmax(0,1fr)); gap: 8px; }

  /* Barra de acciones en Producción */
  #produccion .row-between { flex-wrap: wrap; gap: .5rem; }
  #produccion .row-between > * { flex: 1 1 auto; }

  /* Modales ocupan casi toda la pantalla */
  .modal .modal-content { width: 96vw; max-width: 520px; }

  /* Status: botones en 2 columnas */
  .status-tabs .ghost { flex: 1 1 48%; text-align: center; }
}

/* ========= TABLET (577–768px) ========= */
@media (min-width: 577px) and (max-width: 768px) {
  .container { padding: 14px 16px; }
  .kpi-grid { grid-template-columns: repeat(3, minmax(0,1fr)); }
  .grid-catalogo { grid-template-columns: repeat(3, minmax(0,1fr)); }
  .status-tabs .ghost { flex: 0 0 auto; }
}

/* ========= DESKTOP (769–1200px) ========= */
@media (min-width: 769px) and (max-width: 1200px) {
  .container { max-width: 1100px; }
  .kpi-grid { grid-template-columns: repeat(4, minmax(0,1fr)); }
  .grid-catalogo { grid-template-columns: repeat(4, minmax(0,1fr)); }
  .modal .modal-content { width: min(86vw, 760px); }
}

/* ========= GRANDES (≥1201px) ========= */
@media (min-width: 1201px) {
  .container { max-width: 1400px; }
  .kpi-grid { grid-template-columns: repeat(4, minmax(0,1fr)); }
  .grid-catalogo { grid-template-columns: repeat(6, minmax(0,1fr)); }
  .modal .modal-content { width: min(70vw, 820px); }
}

/* ---- Afinado de elementos específicos que muestran progreso ---- */
.restante-wrap { min-width: 160px; }
.progress { position: relative; height: 28px; border-radius: 999px; overflow: hidden; background: rgba(255,255,255,.06); }
.progress .bar { height: 100%; width: 0%; background: linear-gradient(90deg, #b38b1e, #f3c13a); transition: width .6s ease; }
.progress.completed .bar { background: linear-gradient(90deg, #1fae4b, #2fe06a); }
.progress .label { position: absolute; inset: 0; display: grid; place-items: center; font-weight: 600; }

/* ---- Sidebar overlay usable en móviles ---- */
.sidebar { width: 280px; }
@media (max-width: 768px) {
  .sidebar { position: fixed; inset: 0 auto 0 0; transform: translateX(-100%); transition: transform .25s ease; }
  body.menu-open .sidebar { transform: translateX(0); }
  #backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.45); backdrop-filter: blur(2px); }
}
