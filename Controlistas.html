<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Controlistas • Patineros</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./Controlistas.css" />
</head>
<body>
  <header class="topbar">
    <nav class="navbar">
      <a href="#l1" id="tabLinkL1" class="active">Línea 1</a>
      <a href="#l2" id="tabLinkL2">Línea 2</a>
      <a href="#l3" id="tabLinkL3">Línea 3</a>
      <!-- Si quieres activar Línea 4, descomenta:
      <a href="#l4" id="tabLinkL4">Línea 4</a>
      -->
    </nav>
    <a href="./index.html" class="logout">Salir</a>
  </header>

  <main class="container">
    <section class="panel">
      <header class="panel-header">
        <h2 id="panelTitle">Retirar • Línea 1</h2>
        <div class="panel-actions">
          <button id="btnRefresh" class="secondary" type="button">Refrescar</button>
        </div>
      </header>

      <div class="scroll">
        <table class="table" id="tablaPendientes">
          <thead>
            <tr>
              <th>Creado</th>
              <th>Posición</th>
              <th>Rack</th>
              <th>Operador</th>
              <th>Código seco</th>
              <th>Cantidad</th>
              <th>Entrada</th>
              <th>Salida</th>
            </tr>
          </thead>
          <tbody><!-- dinámico --></tbody>
        </table>
      </div>

      <p class="hint">Toca cualquier fila para ver el detalle completo y confirmar el retiro.</p>
    </section>
  </main>

  <footer class="foot">
    <small>© 2025 • Área Controlistas</small>
  </footer>

  <!-- Modal: detalle y confirmación -->
  <dialog id="modalDetalle" class="modal">
    <div class="modal-content">
      <h3>Detalle del registro</h3>
      <div id="detalleResumen" class="resume"></div>

      <div class="row two">
        <div class="field">
          <label for="confRack">Confirmar Rack</label>
          <div class="with-actions">
            <input id="confRack" type="text" placeholder="Ej. Rack001" />
            <button type="button" id="btnScanRack" class="ghost">Escanear</button>
          </div>
        </div>
        <div class="field">
          <label for="confPos">Confirmar Posición</label>
          <div class="with-actions">
            <input id="confPos" type="text" placeholder="Ej. P002" />
            <button type="button" id="btnScanPos" class="ghost">Escanear</button>
          </div>
        </div>
      </div>

      <div class="actions">
        <button id="btnConfirmarRetiro" class="primary" type="button">Confirmar retiro</button>
        <button id="btnCerrarDetalle" class="secondary" type="button">Cerrar</button>
      </div>
    </div>
  </dialog>

  <!-- Modal CÓDIGO DE BARRAS (pantalla completa) -->
  <dialog id="modalBAR" class="modal fullscreen">
    <div class="modal-content">
      <div id="barRegion"></div>
      <div class="bar-controls">
        <button class="secondary" id="btnBarUpload" type="button">Subir imagen</button>
        <button class="secondary" id="btnBarCancel" type="button">Cancelar</button>
      </div>
      <div class="bar-hint">Apunta la cámara al código. Formatos válidos: Rack### / P###.</div>
    </div>
  </dialog>

  <!-- Quagga (lector de barras) + JS -->
  <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
  <script src="./Controlistas.js"></script>
</body>
</html>
